---
layout: base.njk
---
{% if collections.post.length %}
    {% for post in collections.post | reverse %}
    {% if loop.index0 < 1 %}
        <article>
            <header>
            <h2>
                {{ post.data.title }}
            </h2>
            <time datetime="{{post.data.date}}">{{ post.data.date | readableDate }}</time>
            </header>
            <main>
            {{ post.data.content | safe }}
            </main>
            {# <footer>
                <a href="{{ post.url }}">Permalink</a>
            </footer> #}
        </article>
        {% endif %}
    {% endfor %}
    {% if collections.post.length > 1 %}
        <h3>Recent posts</h3>
        <section class="post-list">
        {% for post in collections.post | reverse %}
        {% if loop.index0 > 1 %}
            <article class="card">
                <header class="card-header">
                <h3 class="card-title">
                    {{ post.data.title }}
                </h3>
                <time datetime="{{post.data.date}}" class="card-time">{{ post.data.date | readableDate }}</time>
                </header>
                <div class="card-content">
                    {% if post.data.description %}
                    {{ post.data.description }}
                    {% else %}
                    {{ post.data.content | striptags(true) | escape | nl2br | truncate }}
                    {% endif %}
                </div>
                <footer class="card-footer">
                <a href="{{ post.url }}">Read article</a>
                </footer>
            </article>
            {% endif %}
        {% endfor %}
        </section>
    {% endif %}
{% else %}
    No posts could be found. Is everything rendering as expected?
{% endif %}
